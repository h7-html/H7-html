<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ÙˆÙ‚Ø¹ÙŠ</title>

<style>
:root{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#e2e8f0;
  --muted:#94a3b8;
  --accent:#3b82f6;
  --radius:14px;
}

/* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ */
.light{
  --bg:#f1f5f9;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#475569;
  --accent:#2563eb;
}

body{
  background:var(--bg);
  color:var(--text);
  font-family:"Tajawal",sans-serif;
  margin:20px;
  transition:0.3s;
}

/* Ø­Ø±ÙƒØ© Ø¯Ø®ÙˆÙ„ */
.fade{
  animation:fadeIn 0.6s ease;
}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:1;transform:translateY(0);}
}

/* Ø§Ù„ÙƒØ±ÙˆØª */
.card{
  background:var(--card);
  padding:20px;
  border-radius:var(--radius);
  margin-bottom:20px;
  border:1px solid #ffffff10;
  backdrop-filter:blur(6px);
  transition:0.3s;
}

/* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
.tab-btn{
  padding:10px 20px;
  border-radius:var(--radius);
  border:1px solid #ffffff20;
  background:transparent;
  color:var(--text);
  cursor:pointer;
  transition:0.2s;
  font-size:15px;
}
.tab-btn:hover{
  background:#ffffff10;
}
.active-tab{
  background:white;
  color:black;
}

/* Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ */
.portfolio-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:15px;
}
.project{
  background:#ffffff05;
  border-radius:var(--radius);
  overflow:hidden;
  border:1px solid #ffffff10;
  transition:0.3s;
}
.project:hover{
  transform:scale(1.03);
}
.project img{
  width:100%;
  height:140px;
  object-fit:cover;
}
.project-title{
  padding:10px;
  font-size:16px;
  font-weight:bold;
}

/* Ø§Ù„ØªÙ‚ÙŠÙŠÙ… */
.rate-star{
  color:#555;
  transition:0.2s;
  cursor:pointer;
}
.rate-star.active{
  color:gold;
}
.rate-star:hover{
  color:gold;
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„Ø«ÙŠÙ… */
.top-controls{
  display:flex;
  justify-content:space-between;
  margin-bottom:15px;
}
.ctrl-btn{
  padding:8px 14px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  background:var(--accent);
  color:white;
  font-size:14px;
}

/* Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„ */
.social-box{
  margin-top:20px;
}
.social-item{
  display:flex;
  align-items:center;
  gap:10px;
  background:#ffffff08;
  padding:10px;
  border-radius:10px;
  margin-bottom:10px;
  border:1px solid #ffffff10;
  transition:0.2s;
}
.social-item:hover{
  transform:scale(1.02);
  background:#ffffff15;
}
.social-icon{
  width:35px;
  height:35px;
  border-radius:50%;
  background:var(--accent);
  display:flex;
  align-items:center;
  justify-content:center;
  color:white;
  font-size:18px;
}

/* Ø´Ø±ÙŠØ· ØªØ­Ù…ÙŠÙ„ Ø¨Ø³ÙŠØ· */
#loading{
  text-align:center;
  color:var(--muted);
  margin-bottom:10px;
  font-size:14px;
}
</style>
</head>

<body class="fade">

<!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„Ø«ÙŠÙ… -->
<div class="top-controls">
  <button class="ctrl-btn" onclick="toggleLang()" id="langBtn">ğŸŒ Ø§Ù„Ù„ØºØ©</button>
  <button class="ctrl-btn" onclick="toggleTheme()" id="themeBtn">ğŸŒ™ / â˜€ï¸</button>
</div>

<div id="loading">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Google Sheets...</div>

<!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
<div class="card fade">
  <div style="display:flex;gap:10px;justify-content:center">
    <button id="homeBtn" class="tab-btn active-tab" onclick="showSection('home')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button id="skillsBtn" class="tab-btn" onclick="showSection('skills')">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</button>
    <button id="projectsBtn" class="tab-btn" onclick="showSection('projects')">Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</button>
  </div>
</div>

<!-- Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div id="home" class="card section-box fade" style="display:block">

  <div style="display:flex;align-items:center;gap:20px">

    <div id="profileImageBox" style="width:90px;height:90px;border-radius:50%;overflow:hidden;border:2px solid var(--accent);display:none">
      <img id="profileImage" src="" style="width:100%;height:100%;object-fit:cover">
    </div>

    <div>
      <h2 id="nameTxt" style="margin:0;font-size:22px">...</h2>
      <div id="jobTxt" style="color:var(--accent);font-size:15px;margin-bottom:6px"></div>
      <p id="bioTxt" style="color:var(--muted);font-size:14px;margin:0"></p>
      <p id="locationTxt" style="color:var(--muted);font-size:13px;margin-top:6px"></p>
    </div>

  </div>

  <!-- Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„ -->
  <div class="social-box fade">
    <h3 id="socialTitle" style="margin-bottom:10px;margin-top:20px">Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</h3>
    <div id="socialContainer"></div>
  </div>

</div>

<!-- Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª -->
<div id="skills" class="card section-box fade" style=>
  <h2 id="skillsTitle" style="margin-bottom:15px">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©</h2>
  <div id="skillsNew"></div>
</div>

<!-- Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ -->
<div id="projects" class="card section-box fade" style=>
  <h2 id="projectsTitle" style="margin-bottom:15px">Ø£Ø¹Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©</h2>
  <div id="projectsNew" class="portfolio-grid"></div>
</div>

<!-- Ø§Ù„ØªÙ‚ÙŠÙŠÙ… -->
<div class="card fade">
  <h2 id="rateTitle" style="margin-bottom:10px">Ù‚ÙŠÙ‘Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>

  <div style="font-size:30px;cursor:pointer;margin-bottom:10px">
    <span class="rate-star">â˜…</span>
    <span class="rate-star">â˜…</span>
    <span class="rate-star">â˜…</span>
    <span class="rate-star">â˜…</span>
    <span class="rate-star">â˜…</span>
  </div>

  <div id="rateMsg" style="color:var(--accent);font-size:14px"></div>
</div>

<script>
const API_URL = "YOUR_API_URL_HERE"; // <-- Ø­Ø· Ù‡Ù†Ø§ Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆÙŠØ¨ Ø¢Ø¨ ØªØ¨Ø¹Ùƒ

let lang = "ar";

/* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
function showSection(sec){
  document.querySelectorAll(".section-box").forEach(s => s.style.display = "none");
  document.getElementById(sec).style.display = "block";

  document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active-tab"));
  document.getElementById(sec + "Btn").classList.add("active-tab");
}

/* ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ù† sheet (profile) */
function renderProfile(profileData) {
    if (!profileData || profileData.length === 0) return;

    const row = profileData[0];

    document.getElementById("nameTxt").textContent = row["name"] || "";
    document.getElementById("jobTxt").textContent = row["title"] || "";
    document.getElementById("bioTxt").textContent = row["bio"] || "";

    const imgUrl = row["avatar"];
    if (imgUrl){
        const box = document.getElementById("profileImageBox");
        const img = document.getElementById("profileImage");
        img.src = imgUrl;
        box.style.display = "block";
    }
}
/* Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ù† sheet (social) */
function renderSocial(socialData){
  const box = document.getElementById("socialContainer");
  box.innerHTML = "";

  if (!socialData || socialData.length === 0) return;

  socialData.forEach(item => {
    const name = item["platform"];
const url  = item["url"];
    if (!name || !url) return;

    let icon = "ğŸ”—";
    const n = (name || "").toLowerCase();
    if (n.includes("x")) icon = "ğŸ¦";
    else if (n.includes("insta")) icon = "ğŸ“¸";
    else if (n.includes("snap")) icon = "ğŸ‘»";
    else if (n.includes("tik")) icon = "ğŸµ";
    else if (n.includes("you")) icon = "â–¶ï¸";
    else if (n.includes("whats")) icon = "ğŸ’¬";

    const div = document.createElement("div");
    div.className = "social-item";
    div.onclick = () => window.open(url, "_blank");
    div.innerHTML = `
      <div class="social-icon">${icon}</div>
      <div>${name}</div>
    `;
    box.appendChild(div);
  });
}

/* Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ù…Ù† sheet (skills) */
function renderSkillsNew(skillsData){
  const box = document.getElementById("skillsNew");
  box.innerHTML = "";

  if (!skillsData || skillsData.length === 0) return;

  skillsData.forEach(s=>{
    // name | level | category
    const name = s["name"];
    const levelText = s["level"]; // Ù…Ø«Ù„ lv2, lv3...
    let percent = 0;
    if (typeof levelText === "string" && levelText.startsWith("lv")) {
      const num = parseInt(levelText.replace("lv","")) || 1;
      // Ù†Ø­ÙˆÙ„ lv1..lv6 Ø¥Ù„Ù‰ Ù†Ø³Ø¨Ø© ØªÙ‚Ø±ÙŠØ¨Ø§:
      percent = Math.min(100, num * 16 + 10);
    } else {
      percent = 50;
    }

    box.innerHTML += `
      <div style="margin-bottom:14px">
        <div style="font-size:14px;margin-bottom:4px">${name} â€“ ${percent}%</div>
        <div style="width:100%;height:8px;background:#1e293b;border-radius:6px;overflow:hidden">
          <div style="width:${percent}%;height:100%;background:var(--accent)"></div>
        </div>
      </div>
    `;
  });
}

/* Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ù…Ù† sheet (portfolio) */
function renderProjectsNew(projectsData){
  const box = document.getElementById("projectsNew");
  box.innerHTML = "";

  if (!projectsData || projectsData.length === 0) return;

  projectsData.forEach(p=>{
    const title = p["title"];
    const desc  = p["description"] || "";
    const year  = p["year"] || "";
    const img   = p["link"] || "";

    const div = document.createElement("div");
    div.className = "project fade";
    div.innerHTML = `
      ${img ? `<img src="${img}" alt="">` : ""}
      <div class="project-title">${title || ""}</div>
      <div style="padding:0 10px 10px;font-size:12px;color:var(--muted)">
        ${year} ${desc ? " â€“ " + desc : ""}
      </div>
    `;
    box.appendChild(div);
  });
}

/* Ø§Ù„ØªÙ‚ÙŠÙŠÙ… */
function setupRating(){
  const stars = document.querySelectorAll(".rate-star");
  const msg = document.getElementById("rateMsg");

  stars.forEach((star,idx)=>{
    star.onclick = ()=>{
      stars.forEach(s=>s.classList.remove("active"));
      for(let i=0;i<=idx;i++) stars[i].classList.add("active");
      msg.textContent = lang==="ar" ? "Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ùƒ!" : "Thanks for your rating!";
    };
  });
}

/* Ø§Ù„Ù„ØºØ© (ÙˆØ§Ø¬Ù‡Ø© ÙÙ‚Ø·ØŒ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø´ÙŠØª ØªØ¸Ù„ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠ) */
function toggleLang(){
  lang = lang==="ar" ? "en" : "ar";

  document.documentElement.lang = lang;
  document.documentElement.dir = lang==="ar" ? "rtl" : "ltr";

  document.getElementById("homeBtn").textContent     = lang==="ar"?"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©":"Home";
  document.getElementById("skillsBtn").textContent   = lang==="ar"?"Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª":"Skills";
  document.getElementById("projectsBtn").textContent = lang==="ar"?"Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹":"Projects";

  document.getElementById("skillsTitle").textContent   = lang==="ar"?"Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©":"Technical Skills";
  document.getElementById("projectsTitle").textContent = lang==="ar"?"Ø£Ø¹Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©":"My Portfolio";
  document.getElementById("rateTitle").textContent     = lang==="ar"?"Ù‚ÙŠÙ‘Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹":"Rate the Website";
  document.getElementById("socialTitle").textContent   = lang==="ar"?"Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ":"Social Media";

  document.getElementById("langBtn").textContent   = lang==="ar" ? "ğŸŒ Ø§Ù„Ù„ØºØ©" : "ğŸŒ Language";
  document.getElementById("themeBtn").textContent  = lang==="ar" ? "ğŸŒ™ / â˜€ï¸" : "ğŸŒ™ / â˜€ï¸";

  const loading = document.getElementById("loading");
  if (loading){
    loading.textContent = lang==="ar" ? "Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Google Sheets..." : "Loading data from Google Sheets...";
  }
}

/* Ø§Ù„Ø«ÙŠÙ… */
function toggleTheme(){
  document.body.classList.toggle("light");
}

/* Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Google Sheets */
async function loadData(){
  const loading = document.getElementById("loading");
  try{
    const res = await fetch("https://script.google.com/macros/s/AKfycbw_VII5r-0j0LE4EPD7c26WewRADbz4rjGMXCnORKpB3Jf8TuFe2HqZL2AZ7yDqtzMA/exec");
    const data = await res.json();

    if (loading) loading.style.display = "none";

    renderProfile(data.profile);
    renderSocial(data.social);
    renderSkillsNew(data.skills);
    renderProjectsNew(data.portfolio);
  }catch(e){
    console.error(e);
    if (loading){
      loading.textContent = lang==="ar"
        ? "ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Google Apps Script."
        : "Failed to load data. Check Google Apps Script settings.";
    }
  }
}

/* ØªØ´ØºÙŠÙ„ */
function initPage(){
  setupRating();
  toggleLang(); // Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
  toggleLang(); // Ù†Ø±Ø¬Ø¹ Ù„Ù„Ø¹Ø±Ø¨ÙŠ ÙƒÙ†Ù‚Ø·Ø© Ø¨Ø¯Ø¡
  loadData();
}

initPage();
</script>

</body>
</html>